<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>AEGIS + PAC-G — Interface Unifiée</title>

<style>
:root{
--bg:#0a0e1a;--panel:#151b2e;--border:#25335a;
--green:#7bed9f;--purple:#c77dff;--red:#ff6b6b;--yellow:#ffd43b
}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:Courier New,monospace;background:var(--bg);color:#e6e6e6}
header{padding:30px 20px;text-align:center;border-bottom:3px solid var(--green)}
h1{color:var(--green);text-shadow:0 0 18px var(--green)}
.sub{opacity:.85;margin-top:8px;font-size:14px}
.container{max-width:1400px;margin:auto;padding:20px}
.tabs{display:flex;gap:12px;flex-wrap:wrap;margin-bottom:20px}
.tab{border:2px solid var(--border);padding:10px 16px;cursor:pointer;font-size:13px}
.tab.active{border-color:var(--green);color:var(--green);box-shadow:0 0 18px rgba(123,237,159,.3)}
.section{display:none}
.section.active{display:block;animation:fadeIn .35s}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:none}}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:18px}
.card{background:var(--panel);border:2px solid var(--border);padding:18px;cursor:pointer;transition:.25s}
.card:hover{border-color:var(--purple);box-shadow:0 0 22px rgba(199,125,255,.3);transform:translateY(-4px)}
.title{color:var(--purple);font-weight:bold;margin-bottom:6px;font-size:15px}
.diff{font-size:10px;padding:4px 8px;display:inline-block;margin-bottom:8px}
.easy{background:var(--green);color:#000}
.medium{background:var(--yellow);color:#000}
.hard{background:var(--red);color:#fff}
.meta{font-size:11px;opacity:.75;margin-top:8px}
textarea{width:100%;min-height:130px;background:#0a0e1a;border:2px solid var(--border);padding:14px;color:#e6e6e6}
button{background:none;border:2px solid var(--green);color:var(--green);padding:10px;width:100%;cursor:pointer;font-size:13px}
button:hover{background:var(--green);color:#000}
.modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.92);z-index:999;align-items:center;justify-content:center}
.modal.active{display:flex}
.modal-box{background:var(--panel);border:3px solid var(--purple);padding:28px;max-width:800px;width:100%}
.stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:12px;margin-bottom:20px}
.stat{background:var(--panel);border:2px solid var(--border);padding:14px;text-align:center}
.stat b{display:block;color:var(--green);font-size:28px}
footer{opacity:.6;font-size:12px;text-align:center;padding:20px 0}
</style>
</head>

<body>

<header>
  <h1>AEGIS + PAC-G — INTERFACE UNIFIÉE</h1>
  <div class="sub">Jeu de rôle asynchrone + actions citoyennes réelles</div>
</header>

<div class="container">

  <div class="tabs">
    <div class="tab active" data-tab="missions">MISSIONS</div>
    <div class="tab" data-tab="pacg">PAC-G (VRAI)</div>
    <div class="tab" data-tab="journal">JOURNAL</div>
    <div class="tab" data-tab="profil">PROFIL</div>
  </div>

  <div class="section active" id="missions">
    <div class="grid" id="missionsGrid"></div>
  </div>

  <div class="section" id="pacg">
    <div class="grid" id="pacgGrid"></div>
  </div>

  <div class="section" id="journal">
    <div class="grid" id="journalGrid"></div>
  </div>

  <div class="section" id="profil">
    <div class="stats">
      <div class="stat"><b id="xp">0</b>XP</div>
      <div class="stat"><b id="done">0</b>MISSIONS</div>
      <div class="stat"><b id="pacgDone">0</b>ACTIONS PAC-G</div>
    </div>
    <button onclick="resetAll()">RÉINITIALISER LES DONNÉES</button>
  </div>

</div>

<div class="modal" id="modal">
<div class="modal-box">
  <h2 id="modalTitle"></h2>
  <p id="modalDesc" class="sub"></p>
  <textarea id="modalResponse" placeholder="Décrire l’action / résultat / preuve..."></textarea>
  <button onclick="submitAction()">DÉCLARER</button>
  <button style="border-color:var(--red);color:var(--red)" onclick="closeModal()">ANNULER</button>
</div>
</div>

<footer>
  Intégration PAC-G — Données locales • AEGIS • Éducation permanente • 2030
</footer>

<script>
// ——————————————————————————————
// DATA
// — Missions AEGIS (jeu)
const missions=[
  {t:"Détecter une fake news",d:"easy",xp:50,txt:"Identifier et expliquer un mécanisme de désinformation."},
  {t:"Tracer la supply chain",d:"medium",xp:120,txt:"Remonter la chaîne d’un objet banal."},
  {t:"Questionner une évidence",d:"hard",xp:180,txt:"Déconstruire une vérité admise."}
];

// — Actions PAC-G (programme réel)
const pacgActions=[
  {t:"Atelier d’analyse collective",d:"easy",xp:40,txt:"Participation à un atelier d’analyse critique en groupe."},
  {t:"Lecture critique d’un décret",d:"medium",xp:90,txt:"Analyse détaillée d’un texte législatif."},
  {t:"Production d’un outil citoyen",d:"hard",xp:160,txt:"Créer un livrable utile à la communauté (fiche, guide, etc.)."}
];

// — Journal (actions déclarées)
let journal=[];

// — état local
let state=JSON.parse(localStorage.getItem("aegis_pacg_state"))||{xp:0,done:0,pacgDone:0};

// ——————————————————————————————
// RENDERING
// — Render Missions
const missionsGrid=document.getElementById("missionsGrid");
missions.forEach((m,i)=>{
  const c=document.createElement("div");
  c.className="card";
  c.innerHTML=`<div class="title">${m.t}</div>
                <div class="diff ${m.d}">${m.d.toUpperCase()}</div>
                <div>${m.txt}</div>
                <div class="meta">+${m.xp} XP</div>`;
  c.onclick=()=>openModal(m,false);
  missionsGrid.appendChild(c);
});

// — Render PAC-G actions
const pacgGrid=document.getElementById("pacgGrid");
pacgActions.forEach((m,i)=>{
  const c=document.createElement("div");
  c.className="card";
  c.innerHTML=`<div class="title">${m.t}</div>
                <div class="diff ${m.d}">${m.d.toUpperCase()}</div>
                <div>${m.txt}</div>
                <div class="meta">+${m.xp} XP</div>`;
  c.onclick=()=>openModal(m,true);
  pacgGrid.appendChild(c);
});

// — Render Journal
function refreshJournal(){
  const journalGrid=document.getElementById("journalGrid");
  journalGrid.innerHTML="";
  journal.slice().reverse().forEach(e=>{
    const c=document.createElement("div");
    c.className="card";
    c.innerHTML=`<div class="title">${e.t}</div>
                 <div class="sub">${new Date(e.time).toLocaleString()}</div>
                 <div class="meta">${e.desc}</div>`;
    journalGrid.appendChild(c);
  });
}

// ——————————————————————————————
// MODAL HANDLING
let current=null, isPacg=false;
function openModal(item,pacg){
  current=item;
  isPacg=pacg;
  document.getElementById("modalTitle").textContent=item.t;
  document.getElementById("modalDesc").textContent=item.txt;
  document.getElementById("modalResponse").value="";
  document.getElementById("modal").classList.add("active");
}
function closeModal(){
  document.getElementById("modal").classList.remove("active");
}

// ——————————————————————————————
// SUBMIT ACTION
function submitAction(){
  const resp=document.getElementById("modalResponse").value.trim();
  if(!resp){alert("Please enter a description.");return;}
  state.xp += current.xp;
  if(isPacg) state.pacgDone++;
  else state.done++;
  localStorage.setItem("aegis_pacg_state",JSON.stringify(state));
  journal.push({t:current.t,time:Date.now(),desc:resp});
  refreshJournal();
  updateStats();
  closeModal();
}

// ——————————————————————————————
// STATS
function updateStats(){
  document.getElementById("xp").textContent=state.xp;
  document.getElementById("done").textContent=state.done;
  document.getElementById("pacgDone").textContent=state.pacgDone;
}
updateStats();

// ——————————————————————————————
// TAB SWITCHING
document.querySelectorAll(".tab").forEach(tab=>{
  tab.onclick=()=>{
    document.querySelectorAll(".tab").forEach(x=>x.classList.remove("active"));
    document.querySelectorAll(".section").forEach(s=>s.classList.remove("active"));
    tab.classList.add("active");
    document.getElementById(tab.dataset.tab).classList.add("active");
    if(tab.dataset.tab==="journal") refreshJournal();
  };
});

// ——————————————————————————————
// RESET
function resetAll(){
  if(confirm("Réinitialiser toutes les données ?")){localStorage.removeItem("aegis_pacg_state");location.reload();}
}

</script>

</body>
</html>
